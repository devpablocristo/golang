# Example API

This is a basic web application written in Go using the Gin web framework.

## Getting Started

1. Run the application:

   ```bash
   cd cmd
   go run main.go routes.go
   ```

   The server will start, and you can access the application at [http://localhost:8080](http://localhost:8080).

## Description

In this project, we manage `items` that sellers sell on a marketplace. This API provides CRUD operations for `items`, each governed by specific business rules.

### Items

An item contains basic information about a product that will be listed on our platform.

#### Item Representation

Here's an example JSON representation of an item:

```json
{
  "id": 10,
  "code": "SAM27324354",
  "title": "Tablet Samsung Galaxy Tab S7",
  "description": "Galaxy Tab S7 with S Pen SM-t733 12.4 inches and 4GB RAM",
  "price": 150000.35,
  "stock": 3,
  "status": "ACTIVE",
  "created_at": "2020-05-10T04:20:33Z",
  "updated_at": "2020-05-10T05:30:00Z"
}
```

#### Rules for Items

1. IDs must be generated automatically.
2. The fields `code`, `title`, `description`, `price`, `stock`, and `photos` are mandatory.
3. The `code` field must be unique.
4. The fields `status`, `created_at`, and `updated_at` are automatically generated by the system. The API should not allow modifications to these fields.
5. The `status` field can have the following values:
   - `ACTIVE`: An item with available stock.
   - `INACTIVE`: An item with a stock value of zero (0).

#### Operations

1. **Create new items.**

   _Request_:

   ```
   POST v1/items
   ```

   _Body_:

   ```json
   {
     "code": "SAM27324354",
     "title": "Tablet Samsung Galaxy Tab S7",
     "description": "Galaxy Tab S7 with S Pen SM-t733 12.4 inches and 4GB RAM",
     "price": 150000.31,
     "stock": 15
   }
   ```

   _Response_:

   ```json
   {
     "id": 11,
     "code": "SAM27324355",
     "title": "New Tablet",
     "description": "Brand new tablet with advanced features",
     "price": 200000.50,
     "stock": 10,
     "status": "ACTIVE",
     "created_at": "2022-01-18T12:30:45Z",
     "updated_at": "2022-01-18T12:30:45Z"
   }
   ```

2. **Update an item**

   _Request_:

   ```
   PUT v1/items/{id}
   ```

   _Body_:

   ```json
   {
     "code": "SAM27324354",
     "title": "Tablet Samsung Galaxy Tab S7",
     "description": "Galaxy Tab S7 with S Pen SM-t733 12.4 inches and 4GB RAM",
     "price": 158000.65,
     "stock": 25
   }
   ```

   _Response_:

   ```json
   {
     "id": 10,
     "code": "SAM27324354",
     "title": "Tablet Samsung Galaxy Tab S7",
     "description": "Updated description with new features",
     "price": 158000.65,
     "stock": 25,
     "status": "ACTIVE",
     "created_at": "2020-05-10T04:20:33Z",
     "updated_at": "2022-01-18T12:35:20Z"
   }
   ```

3. **Get an item by ID**

   _Request_:

   ```
   GET v1/items/{id}
   ```

   _Response_:

   ```json
   {
     "id": 10,
     "code": "SAM27324354",
     "title": "Tablet Samsung Galaxy Tab S7",
     "description": "Galaxy Tab S7 with S Pen SM-t733 12.4 inches and 4GB RAM",
     "price": 150000.35,
     "stock": 3,
     "status": "ACTIVE",
     "created_at": "2020-05-10T04:20:33Z",
     "updated_at": "2020-05-10T05:30:00Z"
   }
   ```

4. **Delete an Item**

   _Request_:

   ```
   DELETE v1/items/{id}
   ```

   _Response_:

   ```json
   {
     "message": "Item deleted successfully"
   }
   ```

5. **Get all items (optional: allow filtering by _Status_)**

   _Request_:

   ```
   GET v1/items?status={status}&limit={limit}
   ```

   Where:

   - `status`: Filter by the item's status; this is an optional parameter:
     - `Not specified`: Returns all items regardless of their status field value.
     - `ACTIVE`: Returns active items.
     - `INACTIVE`: Returns inactive items.

   - `limit`: The requested size of the result page. This is an optional parameter, with a default value of 10 and a maximum value of 20.

   _Response_:

   ```json
   {
     "totalPages": 1,
     "data": [
       {
         "id": 10,
         "code": "SAM27324354",
         "title": "Tablet Samsung Galaxy Tab S7",
         "description": "Galaxy Tab S7 with S Pen SM-t733 12.4 inches and 4GB RAM",
         "price": 150000,
         "stock": 3,
         "status": "ACTIVE",
         "created_at": "2020-05-10T04:20:33Z",
         "updated_at": "2020-05-10T05:30:00Z"
       }
     ]
   }
   ```